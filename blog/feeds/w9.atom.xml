<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>網際內容管理系統 - w9</title><link href="./" rel="alternate"></link><link href="./feeds/w9.atom.xml" rel="self"></link><id>./</id><updated>2024-04-19T07:51:34+08:00</updated><entry><title>2024 Spring 課程w9</title><link href="./2a-midag6_2024-Spring-w9-blog-tutorial.html" rel="alternate"></link><published>2024-02-23T16:39:00+08:00</published><updated>2024-04-19T07:51:34+08:00</updated><author><name>41023233</name></author><id>tag:None,2024-02-23:./2a-midag6_2024-Spring-w9-blog-tutorial.html</id><summary type="html">&lt;p&gt;2024 Spring 網際內容管理與協同產品設計實習課程教學導引.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;2024 Spring 網際內容管理與協同產品設計實習課程教學導引.&lt;/p&gt;


&lt;p&gt;自評2a-midag6期中考成績&lt;/p&gt;
&lt;h1&gt;w9&lt;/h1&gt;
&lt;p&gt;自評2a-midag6期中考成績&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;協同資料處理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;請各班各組根據&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;a href="https://gist.githubusercontent.com/mdecycu/8ba6fa28317bc7a784d8350e7bc33580/raw/30b7be16b4870ef54c0677a380a029c9202df356/2a_cd2024_midterm.csv"&gt;2a_cd2024_midterm.csv&lt;/a&gt;, 以及&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;a href="https://gist.githubusercontent.com/mdecycu/8ba6fa28317bc7a784d8350e7bc33580/raw/30b7be16b4870ef54c0677a380a029c9202df356/2b_cd2024_midterm.csv"&gt;2b_cd2024_midterm.csv&lt;/a&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;中的學號、Github 帳號與組別, 設法在各組員與分組網站中, 列出各學員的 cd2024 倉儲、網站, 以及各班各組的期中報告倉儲與網站連結.&lt;/p&gt;
&lt;p&gt;過程中, 請詳細說明各組及學員的倉儲與網站中的連結資料如何建立? 手動輸入? 利用程式進行處理? 或者採分工合作方式建立?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;鋼球平衡台 PID 控制與模擬&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;對 Gemini 1.5 Pro 提問:&lt;/p&gt;
&lt;p&gt;以下為利用 PID 控制 CoppeliaSim&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;a href="http://229.cycu.org/ball_beam_balancing_PID_control_coppeliasim_1d_and_2d.7z"&gt;鋼球平衡台場景&lt;/a&gt;的 ZMQ RemoteAPI Python 程式, 請利用 Python 模組將系統控制過程, 鋼球在平衡台上的 x 方向座標與 y 方向, 利用 matplotlib 畫出來. "這裡附上原本的 PID 控制程式碼"&lt;/p&gt;
&lt;p&gt;回答:&lt;/p&gt;
&lt;div&gt;
&lt;div class="syntaxhighlighter python" id="highlighter_288267"&gt;
&lt;table border="0" cellpadding="0" cellspacing="0"&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class="gutter"&gt;
&lt;div class="line number1 index0 alt2"&gt;1&lt;/div&gt;
&lt;div class="line number2 index1 alt1"&gt;2&lt;/div&gt;
&lt;div class="line number3 index2 alt2"&gt;3&lt;/div&gt;
&lt;div class="line number4 index3 alt1"&gt;4&lt;/div&gt;
&lt;div class="line number5 index4 alt2"&gt;5&lt;/div&gt;
&lt;div class="line number6 index5 alt1"&gt;6&lt;/div&gt;
&lt;div class="line number7 index6 alt2"&gt;7&lt;/div&gt;
&lt;div class="line number8 index7 alt1"&gt;8&lt;/div&gt;
&lt;div class="line number9 index8 alt2"&gt;9&lt;/div&gt;
&lt;div class="line number10 index9 alt1"&gt;10&lt;/div&gt;
&lt;div class="line number11 index10 alt2"&gt;11&lt;/div&gt;
&lt;div class="line number12 index11 alt1"&gt;12&lt;/div&gt;
&lt;div class="line number13 index12 alt2"&gt;13&lt;/div&gt;
&lt;div class="line number14 index13 alt1"&gt;14&lt;/div&gt;
&lt;div class="line number15 index14 alt2"&gt;15&lt;/div&gt;
&lt;div class="line number16 index15 alt1"&gt;16&lt;/div&gt;
&lt;div class="line number17 index16 alt2"&gt;17&lt;/div&gt;
&lt;div class="line number18 index17 alt1"&gt;18&lt;/div&gt;
&lt;div class="line number19 index18 alt2"&gt;19&lt;/div&gt;
&lt;div class="line number20 index19 alt1"&gt;20&lt;/div&gt;
&lt;div class="line number21 index20 alt2"&gt;21&lt;/div&gt;
&lt;div class="line number22 index21 alt1"&gt;22&lt;/div&gt;
&lt;div class="line number23 index22 alt2"&gt;23&lt;/div&gt;
&lt;div class="line number24 index23 alt1"&gt;24&lt;/div&gt;
&lt;div class="line number25 index24 alt2"&gt;25&lt;/div&gt;
&lt;div class="line number26 index25 alt1"&gt;26&lt;/div&gt;
&lt;div class="line number27 index26 alt2"&gt;27&lt;/div&gt;
&lt;div class="line number28 index27 alt1"&gt;28&lt;/div&gt;
&lt;div class="line number29 index28 alt2"&gt;29&lt;/div&gt;
&lt;div class="line number30 index29 alt1"&gt;30&lt;/div&gt;
&lt;div class="line number31 index30 alt2"&gt;31&lt;/div&gt;
&lt;div class="line number32 index31 alt1"&gt;32&lt;/div&gt;
&lt;div class="line number33 index32 alt2"&gt;33&lt;/div&gt;
&lt;div class="line number34 index33 alt1"&gt;34&lt;/div&gt;
&lt;div class="line number35 index34 alt2"&gt;35&lt;/div&gt;
&lt;div class="line number36 index35 alt1"&gt;36&lt;/div&gt;
&lt;div class="line number37 index36 alt2"&gt;37&lt;/div&gt;
&lt;div class="line number38 index37 alt1"&gt;38&lt;/div&gt;
&lt;div class="line number39 index38 alt2"&gt;39&lt;/div&gt;
&lt;div class="line number40 index39 alt1"&gt;40&lt;/div&gt;
&lt;div class="line number41 index40 alt2"&gt;41&lt;/div&gt;
&lt;div class="line number42 index41 alt1"&gt;42&lt;/div&gt;
&lt;div class="line number43 index42 alt2"&gt;43&lt;/div&gt;
&lt;div class="line number44 index43 alt1"&gt;44&lt;/div&gt;
&lt;div class="line number45 index44 alt2"&gt;45&lt;/div&gt;
&lt;div class="line number46 index45 alt1"&gt;46&lt;/div&gt;
&lt;div class="line number47 index46 alt2"&gt;47&lt;/div&gt;
&lt;div class="line number48 index47 alt1"&gt;48&lt;/div&gt;
&lt;div class="line number49 index48 alt2"&gt;49&lt;/div&gt;
&lt;div class="line number50 index49 alt1"&gt;50&lt;/div&gt;
&lt;div class="line number51 index50 alt2"&gt;51&lt;/div&gt;
&lt;div class="line number52 index51 alt1"&gt;52&lt;/div&gt;
&lt;div class="line number53 index52 alt2"&gt;53&lt;/div&gt;
&lt;div class="line number54 index53 alt1"&gt;54&lt;/div&gt;
&lt;div class="line number55 index54 alt2"&gt;55&lt;/div&gt;
&lt;div class="line number56 index55 alt1"&gt;56&lt;/div&gt;
&lt;div class="line number57 index56 alt2"&gt;57&lt;/div&gt;
&lt;div class="line number58 index57 alt1"&gt;58&lt;/div&gt;
&lt;div class="line number59 index58 alt2"&gt;59&lt;/div&gt;
&lt;div class="line number60 index59 alt1"&gt;60&lt;/div&gt;
&lt;div class="line number61 index60 alt2"&gt;61&lt;/div&gt;
&lt;div class="line number62 index61 alt1"&gt;62&lt;/div&gt;
&lt;div class="line number63 index62 alt2"&gt;63&lt;/div&gt;
&lt;div class="line number64 index63 alt1"&gt;64&lt;/div&gt;
&lt;div class="line number65 index64 alt2"&gt;65&lt;/div&gt;
&lt;div class="line number66 index65 alt1"&gt;66&lt;/div&gt;
&lt;div class="line number67 index66 alt2"&gt;67&lt;/div&gt;
&lt;div class="line number68 index67 alt1"&gt;68&lt;/div&gt;
&lt;div class="line number69 index68 alt2"&gt;69&lt;/div&gt;
&lt;div class="line number70 index69 alt1"&gt;70&lt;/div&gt;
&lt;div class="line number71 index70 alt2"&gt;71&lt;/div&gt;
&lt;div class="line number72 index71 alt1"&gt;72&lt;/div&gt;
&lt;div class="line number73 index72 alt2"&gt;73&lt;/div&gt;
&lt;div class="line number74 index73 alt1"&gt;74&lt;/div&gt;
&lt;div class="line number75 index74 alt2"&gt;75&lt;/div&gt;
&lt;div class="line number76 index75 alt1"&gt;76&lt;/div&gt;
&lt;div class="line number77 index76 alt2"&gt;77&lt;/div&gt;
&lt;div class="line number78 index77 alt1"&gt;78&lt;/div&gt;
&lt;div class="line number79 index78 alt2"&gt;79&lt;/div&gt;
&lt;div class="line number80 index79 alt1"&gt;80&lt;/div&gt;
&lt;div class="line number81 index80 alt2"&gt;81&lt;/div&gt;
&lt;div class="line number82 index81 alt1"&gt;82&lt;/div&gt;
&lt;div class="line number83 index82 alt2"&gt;83&lt;/div&gt;
&lt;div class="line number84 index83 alt1"&gt;84&lt;/div&gt;
&lt;div class="line number85 index84 alt2"&gt;85&lt;/div&gt;
&lt;div class="line number86 index85 alt1"&gt;86&lt;/div&gt;
&lt;div class="line number87 index86 alt2"&gt;87&lt;/div&gt;
&lt;div class="line number88 index87 alt1"&gt;88&lt;/div&gt;
&lt;div class="line number89 index88 alt2"&gt;89&lt;/div&gt;
&lt;div class="line number90 index89 alt1"&gt;90&lt;/div&gt;
&lt;div class="line number91 index90 alt2"&gt;91&lt;/div&gt;
&lt;div class="line number92 index91 alt1"&gt;92&lt;/div&gt;
&lt;div class="line number93 index92 alt2"&gt;93&lt;/div&gt;
&lt;div class="line number94 index93 alt1"&gt;94&lt;/div&gt;
&lt;div class="line number95 index94 alt2"&gt;95&lt;/div&gt;
&lt;div class="line number96 index95 alt1"&gt;96&lt;/div&gt;
&lt;div class="line number97 index96 alt2"&gt;97&lt;/div&gt;
&lt;div class="line number98 index97 alt1"&gt;98&lt;/div&gt;
&lt;div class="line number99 index98 alt2"&gt;99&lt;/div&gt;
&lt;/td&gt;
&lt;td class="code"&gt;
&lt;div class="container"&gt;
&lt;div class="line number1 index0 alt2"&gt;&lt;code class="python comments"&gt;# 導入必要的模組&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number2 index1 alt1"&gt;&lt;code class="python comments"&gt;# pip install pyzmq cbor keyboard matplotlib&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number3 index2 alt2"&gt;&lt;code class="python keyword"&gt;import&lt;/code&gt; &lt;code class="python plain"&gt;matplotlib.pyplot as plt&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number4 index3 alt1"&gt;&lt;code class="python keyword"&gt;from&lt;/code&gt; &lt;code class="python plain"&gt;zmqRemoteApi_IPv6 &lt;/code&gt;&lt;code class="python keyword"&gt;import&lt;/code&gt; &lt;code class="python plain"&gt;RemoteAPIClient&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number5 index4 alt2"&gt;&lt;code class="python keyword"&gt;import&lt;/code&gt; &lt;code class="python plain"&gt;keyboard&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number6 index5 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number7 index6 alt2"&gt;&lt;code class="python comments"&gt;# 利用 zmqRemoteAPI 以 23000 對場景伺服器進行連線&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number8 index7 alt1"&gt;&lt;code class="python plain"&gt;client &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;RemoteAPIClient(&lt;/code&gt;&lt;code class="python string"&gt;'localhost'&lt;/code&gt;&lt;code class="python plain"&gt;, &lt;/code&gt;&lt;code class="python value"&gt;23000&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number9 index8 alt2"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number10 index9 alt1"&gt;&lt;code class="python functions"&gt;print&lt;/code&gt;&lt;code class="python plain"&gt;(&lt;/code&gt;&lt;code class="python string"&gt;'Program started'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number11 index10 alt2"&gt;&lt;code class="python plain"&gt;sim &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;client.getObject(&lt;/code&gt;&lt;code class="python string"&gt;'sim'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number12 index11 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number13 index12 alt2"&gt;&lt;code class="python comments"&gt;# Get the handles of the ball, motorx, and motory objects&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number14 index13 alt1"&gt;&lt;code class="python plain"&gt;ball_handle &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;sim.getObject(&lt;/code&gt;&lt;code class="python string"&gt;'/ball'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number15 index14 alt2"&gt;&lt;code class="python plain"&gt;motorx_handle &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;sim.getObject(&lt;/code&gt;&lt;code class="python string"&gt;'/motorx'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number16 index15 alt1"&gt;&lt;code class="python plain"&gt;motory_handle &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;sim.getObject(&lt;/code&gt;&lt;code class="python string"&gt;'/motory'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number17 index16 alt2"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number18 index17 alt1"&gt;&lt;code class="python comments"&gt;# PID control constants for x and y coordinates&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number19 index18 alt2"&gt;&lt;code class="python plain"&gt;kp_x &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python value"&gt;1.0&lt;/code&gt;&amp;nbsp; &lt;code class="python comments"&gt;# Proportional gain for x&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number20 index19 alt1"&gt;&lt;code class="python plain"&gt;ki_x &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python value"&gt;0.1&lt;/code&gt;&amp;nbsp; &lt;code class="python comments"&gt;# Integral gain for x&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number21 index20 alt2"&gt;&lt;code class="python plain"&gt;kd_x &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python value"&gt;0.5&lt;/code&gt;&amp;nbsp; &lt;code class="python comments"&gt;# Derivative gain for x&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number22 index21 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number23 index22 alt2"&gt;&lt;code class="python plain"&gt;kp_y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python value"&gt;1.0&lt;/code&gt;&amp;nbsp; &lt;code class="python comments"&gt;# Proportional gain for y&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number24 index23 alt1"&gt;&lt;code class="python plain"&gt;ki_y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python value"&gt;0.1&lt;/code&gt;&amp;nbsp; &lt;code class="python comments"&gt;# Integral gain for y&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number25 index24 alt2"&gt;&lt;code class="python plain"&gt;kd_y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python value"&gt;0.5&lt;/code&gt;&amp;nbsp; &lt;code class="python comments"&gt;# Derivative gain for y&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number26 index25 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number27 index26 alt2"&gt;&lt;code class="python comments"&gt;# Initialize error and integral terms for x and y coordinates&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number28 index27 alt1"&gt;&lt;code class="python plain"&gt;error_sum_x &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python value"&gt;0.0&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number29 index28 alt2"&gt;&lt;code class="python plain"&gt;last_error_x &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python value"&gt;0.0&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number30 index29 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number31 index30 alt2"&gt;&lt;code class="python plain"&gt;error_sum_y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python value"&gt;0.0&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number32 index31 alt1"&gt;&lt;code class="python plain"&gt;last_error_y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python value"&gt;0.0&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number33 index32 alt2"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number34 index33 alt1"&gt;&lt;code class="python comments"&gt;# 建立用於儲存 x 和 y 座標的列表&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number35 index34 alt2"&gt;&lt;code class="python plain"&gt;x_coordinates &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;[]&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number36 index35 alt1"&gt;&lt;code class="python plain"&gt;y_coordinates &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;[]&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number37 index36 alt2"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number38 index37 alt1"&gt;&lt;code class="python plain"&gt;sim.startSimulation()&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number39 index38 alt2"&gt;&lt;code class="python functions"&gt;print&lt;/code&gt;&lt;code class="python plain"&gt;(&lt;/code&gt;&lt;code class="python string"&gt;'Simulation started'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number40 index39 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number41 index40 alt2"&gt;&lt;code class="python comments"&gt;# Function to get the ball's x and y coordinates&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number42 index41 alt1"&gt;&lt;code class="python keyword"&gt;def&lt;/code&gt; &lt;code class="python plain"&gt;getBallCoordinates():&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number43 index42 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;pos &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;sim.getObjectPosition(ball_handle, &lt;/code&gt;&lt;code class="python keyword"&gt;-&lt;/code&gt;&lt;code class="python value"&gt;1&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number44 index43 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;x &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;pos[&lt;/code&gt;&lt;code class="python value"&gt;0&lt;/code&gt;&lt;code class="python plain"&gt;]&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number45 index44 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;pos[&lt;/code&gt;&lt;code class="python value"&gt;1&lt;/code&gt;&lt;code class="python plain"&gt;]&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number46 index45 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python keyword"&gt;return&lt;/code&gt; &lt;code class="python plain"&gt;x, y&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number47 index46 alt2"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number48 index47 alt1"&gt;&lt;code class="python keyword"&gt;def&lt;/code&gt; &lt;code class="python plain"&gt;controlMotor(target_x, target_y, dt):&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number49 index48 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python keyword"&gt;global&lt;/code&gt; &lt;code class="python plain"&gt;error_sum_x, last_error_x, error_sum_y, last_error_y&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number50 index49 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number51 index50 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python comments"&gt;# Get the current ball coordinates&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number52 index51 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;current_x, current_y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;getBallCoordinates()&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number53 index52 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python functions"&gt;print&lt;/code&gt;&lt;code class="python plain"&gt;(&lt;/code&gt;&lt;code class="python string"&gt;"Target: ("&lt;/code&gt;&lt;code class="python plain"&gt;, target_x, &lt;/code&gt;&lt;code class="python string"&gt;","&lt;/code&gt;&lt;code class="python plain"&gt;, target_y, &lt;/code&gt;&lt;code class="python string"&gt;"), Current: ("&lt;/code&gt;&lt;code class="python plain"&gt;, current_x, &lt;/code&gt;&lt;code class="python string"&gt;","&lt;/code&gt;&lt;code class="python plain"&gt;, current_y, &lt;/code&gt;&lt;code class="python string"&gt;")"&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number54 index53 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number55 index54 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python comments"&gt;# Calculate errors for x and y coordinates&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number56 index55 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;error_x &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;target_x &lt;/code&gt;&lt;code class="python keyword"&gt;-&lt;/code&gt; &lt;code class="python plain"&gt;current_x&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number57 index56 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;error_y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;target_y &lt;/code&gt;&lt;code class="python keyword"&gt;-&lt;/code&gt; &lt;code class="python plain"&gt;current_y&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number58 index57 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number59 index58 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python comments"&gt;# Update error sums for x and y coordinates&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number60 index59 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;error_sum_x &lt;/code&gt;&lt;code class="python keyword"&gt;+&lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;error_x&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number61 index60 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;error_sum_y &lt;/code&gt;&lt;code class="python keyword"&gt;+&lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;error_y&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number62 index61 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number63 index62 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python comments"&gt;# Calculate derivatives for x and y coordinates&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number64 index63 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;derivative_x &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;(error_x &lt;/code&gt;&lt;code class="python keyword"&gt;-&lt;/code&gt; &lt;code class="python plain"&gt;last_error_x) &lt;/code&gt;&lt;code class="python keyword"&gt;/&lt;/code&gt; &lt;code class="python plain"&gt;dt&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number65 index64 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;derivative_y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;(error_y &lt;/code&gt;&lt;code class="python keyword"&gt;-&lt;/code&gt; &lt;code class="python plain"&gt;last_error_y) &lt;/code&gt;&lt;code class="python keyword"&gt;/&lt;/code&gt; &lt;code class="python plain"&gt;dt&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number66 index65 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number67 index66 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python comments"&gt;# Calculate control signals for x and y coordinates&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number68 index67 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;control_signal_x &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;kp_x &lt;/code&gt;&lt;code class="python keyword"&gt;*&lt;/code&gt; &lt;code class="python plain"&gt;error_x &lt;/code&gt;&lt;code class="python keyword"&gt;+&lt;/code&gt; &lt;code class="python plain"&gt;ki_x &lt;/code&gt;&lt;code class="python keyword"&gt;*&lt;/code&gt; &lt;code class="python plain"&gt;error_sum_x &lt;/code&gt;&lt;code class="python keyword"&gt;+&lt;/code&gt; &lt;code class="python plain"&gt;kd_x &lt;/code&gt;&lt;code class="python keyword"&gt;*&lt;/code&gt; &lt;code class="python plain"&gt;derivative_x&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number69 index68 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;control_signal_y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;kp_y &lt;/code&gt;&lt;code class="python keyword"&gt;*&lt;/code&gt; &lt;code class="python plain"&gt;error_y &lt;/code&gt;&lt;code class="python keyword"&gt;+&lt;/code&gt; &lt;code class="python plain"&gt;ki_y &lt;/code&gt;&lt;code class="python keyword"&gt;*&lt;/code&gt; &lt;code class="python plain"&gt;error_sum_y &lt;/code&gt;&lt;code class="python keyword"&gt;+&lt;/code&gt; &lt;code class="python plain"&gt;kd_y &lt;/code&gt;&lt;code class="python keyword"&gt;*&lt;/code&gt; &lt;code class="python plain"&gt;derivative_y&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number70 index69 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number71 index70 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python comments"&gt;# Set the rotational angles of motorx and motory&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number72 index71 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;sim.setJointTargetPosition(motorx_handle, control_signal_x)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number73 index72 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;sim.setJointTargetPosition(motory_handle, control_signal_y)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number74 index73 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number75 index74 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python comments"&gt;# Update the last errors for x and y coordinates&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number76 index75 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;last_error_x &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;error_x&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number77 index76 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;last_error_y &lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt; &lt;code class="python plain"&gt;error_y&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number78 index77 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number79 index78 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python comments"&gt;# 儲存目前的 x 和 y 座標&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number80 index79 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;x_coordinates.append(current_x)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number81 index80 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;y_coordinates.append(current_y)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number82 index81 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number83 index82 alt2"&gt;&lt;code class="python keyword"&gt;while&lt;/code&gt; &lt;code class="python color1"&gt;True&lt;/code&gt;&lt;code class="python plain"&gt;:&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number84 index83 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python keyword"&gt;if&lt;/code&gt; &lt;code class="python plain"&gt;keyboard.is_pressed(&lt;/code&gt;&lt;code class="python string"&gt;'q'&lt;/code&gt;&lt;code class="python plain"&gt;):&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number85 index84 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python comments"&gt;# Stop simulation&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number86 index85 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;sim.stopSimulation()&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number87 index86 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python keyword"&gt;break&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number88 index87 alt1"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number89 index88 alt2"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python comments"&gt;# Control the motors to set the ball to the desired coordinates&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number90 index89 alt1"&gt;&lt;code class="python spaces"&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/code&gt;&lt;code class="python plain"&gt;controlMotor(&lt;/code&gt;&lt;code class="python value"&gt;0.3&lt;/code&gt;&lt;code class="python plain"&gt;, &lt;/code&gt;&lt;code class="python value"&gt;0.3&lt;/code&gt;&lt;code class="python plain"&gt;, &lt;/code&gt;&lt;code class="python value"&gt;0.05&lt;/code&gt;&lt;code class="python plain"&gt;)&amp;nbsp; &lt;/code&gt;&lt;code class="python comments"&gt;# Adjust the time step (dt) and target coordinates as needed&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number91 index90 alt2"&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class="line number92 index91 alt1"&gt;&lt;code class="python comments"&gt;# 在模擬結束後繪製圖形&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number93 index92 alt2"&gt;&lt;code class="python plain"&gt;plt.plot(x_coordinates, label&lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt;&lt;code class="python string"&gt;'X Coordinate'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number94 index93 alt1"&gt;&lt;code class="python plain"&gt;plt.plot(y_coordinates, label&lt;/code&gt;&lt;code class="python keyword"&gt;=&lt;/code&gt;&lt;code class="python string"&gt;'Y Coordinate'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number95 index94 alt2"&gt;&lt;code class="python plain"&gt;plt.xlabel(&lt;/code&gt;&lt;code class="python string"&gt;'Time'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number96 index95 alt1"&gt;&lt;code class="python plain"&gt;plt.ylabel(&lt;/code&gt;&lt;code class="python string"&gt;'Coordinate'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number97 index96 alt2"&gt;&lt;code class="python plain"&gt;plt.title(&lt;/code&gt;&lt;code class="python string"&gt;'Ball Position on Balancing Platform'&lt;/code&gt;&lt;code class="python plain"&gt;)&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number98 index97 alt1"&gt;&lt;code class="python plain"&gt;plt.legend()&lt;/code&gt;&lt;/div&gt;
&lt;div class="line number99 index98 alt2"&gt;&lt;code class="python plain"&gt;plt.show()&lt;/code&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;實習步驟:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;開啟可攜程式系統中的 CoppeliaSim&lt;/li&gt;
&lt;li&gt;開啟鋼球平衡台模擬場景&lt;/li&gt;
&lt;li&gt;啟動可攜程式系統, pip install keyboard cbor pyzmq matplotlib&lt;/li&gt;
&lt;li&gt;在 SciTE 中執行上列程式, 確定系統穩定後, 按下 q 終止模擬&lt;/li&gt;
&lt;li&gt;matplotlib 將畫出鋼球在平台上的 x 與 y 座標圖&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img height="240" src="https://mde.tw/cd2024/images/ball_balancing_control_result.png" width="320"&gt;&lt;/p&gt;</content><category term="w9"></category><category term="網誌編寫"></category></entry></feed>